<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Snake Game</title>
  </head>
  <body>
    <canvas id="gameCanvas" width="300" height="300"></canvas>

    <script>
    // CONSTANTS
    const CANVAS_BORDER_COLOR = "black";
    const CANVAS_BACKGROUND_COLOR = "white";
    const SNAKE_COLOR = "lightgreen";
    const SNAKE_BORDER_COLOR = "darkgreen";

    let snake = [
      {x: 150, y: 150},
      {x: 140, y: 150},
      {x: 130, y: 150},
      {x: 120, y: 150},
      {x: 110, y: 150}
    ]

    // Horizontal velocity
    let dx = 10;
    //  Vertical velocity
    let dy = 0;

    // get the canvas element
    var gameCanvas = document.getElementById("gameCanvas");
    // Return a two demensional drawing context
    var ctx = gameCanvas.getContext("2d");
    // Select the color to fill the canvas
    ctx.fillStyle = CANVAS_BACKGROUND_COLOR;
    // Select the color for the border of the canvas
    ctx.strokestyle = CANVAS_BORDER_COLOR;
    // Draw a "filled" rectangle to cover the entire canvas
    ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
    // Draw a "border" around the entire canvas
    ctx.strokeRect(0, 0, gameCanvas.width, gameCanvas.height);

    function clearCanvas() {
      // select the color to fill the drawing
      ctx.fillStyle = CANVAS_BACKGROUND_COLOR;
      // select the color for the border of the canvas
      ctx.strokestyle = CANVAS_BORDER_COLOR;
      // Draw a "filled" rectangle to cover the entire canvas
      ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
      // Draw a "border" around the entire canvas
      ctx.strokeRect(0, 0, gameCanvas.width, gameCanvas.height);
    }

    function main() {
      setTimeout (function onTick() {
        clearCanvas();
        advanceSnake();
        drawSnake();
        // call main again
        main();
      }, 100)
    }

    main();

    // Advances the snake by changing the x-coordinates of its parts
    // according to horizontal velocity and the y-coordinates of its parts
    // according to the vertical velocity
    function advanceSnake() {
      const head = {x: snake[0].x + dx, y: snake[0].y + dy};
      snake.unshift(head);
      snake.pop();
    }

    // Draws the snake on the canvas

    function drawSnake() {
      // loop through the snake parts, drawing each part on the canvas
      snake.forEach(drawSnakePart)
    }

    // Draws a part of the snake on the canvas
    // @param { object } snakePart - The coordinates where the part should be drawn

    function drawSnakePart(snakePart) {
      // Set the color of the snake part
      ctx.fillStyle = SNAKE_COLOR;

      // Set the border color of the snake part
      ctx.strokestyle = SNAKE_BORDER_COLOR;

      // draw a "filled" rectangle to represent the snake part at the coordinates
      // the part is located
      ctx.fillRect(snakePart.x, snakePart.y, 10, 10);

      // draw a border around the snake part
      ctx.strokeRect(snakePart.x, snakePart.y, 10, 10);
    }

    </script>
  </body>
</html>
